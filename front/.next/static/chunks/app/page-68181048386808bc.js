(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9832:function(e,t,r){Promise.resolve().then(r.bind(r,9088))},9088:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var a=r(7437),l=r(2265),s=r(3167),n=r(1367);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}var o=r(5135),c=r(7549),d=r(102);function u(){return(0,a.jsx)("div",{className:"flex bg-gray-100 dark:bg-neutral-900 flex-shrink-0 flex-wrap justify-center items-center gap-x-px gap-y-px scale-105",children:Array.from({length:11}).map((e,t)=>Array.from({length:41}).map((e,r)=>{let l=41*t+r;return(0,a.jsx)("div",{className:"w-10 h-10 flex flex-shrink-0 rounded-[2px] ".concat(l%2==0?"bg-gray-50 dark:bg-neutral-950":"bg-gray-50 dark:bg-neutral-950 shadow-[0px_0px_1px_3px_rgba(255,255,255,1)_inset] dark:shadow-[0px_0px_1px_3px_rgba(0,0,0,1)_inset]")},"".concat(r,"-").concat(t))}))})}let x={initial:{x:0,y:0},animate:{x:20,y:-20,opacity:.9}},f={initial:{opacity:0},animate:{opacity:1}},m=e=>{let{onChange:t}=e,[r,s]=(0,l.useState)([]),n=(0,l.useRef)(null),m=e=>{console.log("newFiles",e),e.length>0?(s(t=>[...t,...e]),t&&t(e)):alert("Seuls les fichiers CSV sont autoris\xe9s.")},{getRootProps:h,isDragActive:p}=(0,d.uI)({multiple:!0,noClick:!0,onDrop:m,onDropRejected:e=>{console.log(e),alert("Erreur de type de fichier")}});return(0,a.jsx)("div",{className:"w-full",...h(),children:(0,a.jsxs)(o.E.div,{onClick:()=>{var e;null===(e=n.current)||void 0===e||e.click()},whileHover:"animate",className:"p-10 group/file block rounded-lg cursor-pointer w-full relative overflow-hidden",children:[(0,a.jsx)("input",{ref:n,id:"file-upload-handle",type:"file",accept:".csv",onChange:e=>m(Array.from(e.target.files||[])),className:"hidden"}),(0,a.jsx)("div",{className:"absolute inset-0 [mask-image:radial-gradient(ellipse_at_center,white,transparent)]",children:(0,a.jsx)(u,{})}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("p",{className:"relative z-20 font-sans font-bold text-neutral-700 dark:text-neutral-300 text-base",children:"Upload your CSV files"}),(0,a.jsx)("p",{className:"relative z-20 font-sans font-normal text-neutral-400 dark:text-neutral-400 text-base mt-2",children:"Drag or drop your files here or click to upload"}),(0,a.jsxs)("div",{className:"relative w-full mt-10 max-w-xl mx-auto",children:[r.length>0&&r.map((e,t)=>(0,a.jsxs)(o.E.div,{layoutId:0===t?"file-upload":"file-upload-"+t,className:i("relative overflow-hidden z-40 bg-white dark:bg-neutral-900 flex flex-col items-start justify-start md:h-24 p-4 mt-4 w-full mx-auto rounded-md","shadow-sm"),children:[(0,a.jsxs)("div",{className:"flex justify-between w-full items-center gap-4",children:[(0,a.jsx)(o.E.p,{initial:{opacity:0},animate:{opacity:1},layout:!0,className:"text-base text-neutral-700 dark:text-neutral-300 truncate max-w-xs",children:e.name}),(0,a.jsxs)(o.E.p,{initial:{opacity:0},animate:{opacity:1},layout:!0,className:"rounded-lg px-2 py-1 w-fit flex-shrink-0 text-sm text-neutral-600 dark:bg-neutral-800 dark:text-white shadow-input",children:[(e.size/1048576).toFixed(2)," MB"]})]}),(0,a.jsxs)("div",{className:"flex text-sm md:flex-row flex-col items-start md:items-center w-full mt-2 justify-between text-neutral-600 dark:text-neutral-400",children:[(0,a.jsx)(o.E.p,{initial:{opacity:0},animate:{opacity:1},layout:!0,className:"px-1 py-0.5 rounded-md bg-gray-100 dark:bg-neutral-800 ",children:e.type}),(0,a.jsxs)(o.E.p,{initial:{opacity:0},animate:{opacity:1},layout:!0,children:["modified"," ",new Date(e.lastModified).toLocaleDateString()]})]})]},"file"+t)),!r.length&&(0,a.jsx)(o.E.div,{layoutId:"file-upload",variants:x,transition:{type:"spring",stiffness:300,damping:20},className:i("relative group-hover/file:shadow-2xl z-40 bg-white dark:bg-neutral-900 flex items-center justify-center h-32 mt-4 w-full max-w-[8rem] mx-auto rounded-md","shadow-[0px_10px_50px_rgba(0,0,0,0.1)]"),children:p?(0,a.jsxs)(o.E.p,{initial:{opacity:0},animate:{opacity:1},className:"text-neutral-600 flex flex-col items-center",children:["Drop it",(0,a.jsx)(c.Z,{className:"h-4 w-4 text-neutral-600 dark:text-neutral-400"})]}):(0,a.jsx)(c.Z,{className:"h-4 w-4 text-neutral-600 dark:text-neutral-300"})}),!r.length&&(0,a.jsx)(o.E.div,{variants:f,className:"absolute opacity-0 border border-dashed border-sky-400 inset-0 z-30 bg-transparent flex items-center justify-center h-32 mt-4 w-full max-w-[8rem] mx-auto rounded-md"})]})]})]})})};function h(e){let{onFilesSelected:t}=e,[r,s]=(0,l.useState)([]);return(0,a.jsx)("div",{className:"w-full max-w-4xl mx-auto min-h-96 border border-dashed bg-white dark:bg-black border-neutral-200 dark:border-neutral-800 rounded-lg",children:(0,a.jsx)(m,{onChange:e=>{s(e),console.log(e),t(e)}})})}var p=r(703),g=r(6288);function y(){let[e,t]=(0,l.useState)([]),r=async e=>{let t=new FormData;e.forEach(e=>{t.append("file",e)});try{let e=await fetch("http://localhost:5000/csv",{method:"POST",body:t});e.ok?g.toast.success("Fichiers envoy\xe9s avec succ\xe8s"):(g.toast.error("Erreur lors de l'envoie des fichiers"),console.error("Erreur lors de l'envoi des fichiers",e))}catch(e){console.error("Erreur de r\xe9seau",e)}};return(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center p-8 pb-20 gap-2 sm:p-20 font-[family-name:var(--font-geist-sans)]",children:[(0,a.jsxs)("main",{className:"flex flex-col gap-8 row-start-2 items-center sm:items-start",children:[(0,a.jsx)(h,{onFilesSelected:e=>{t(e)}}),(0,a.jsx)("div",{className:"flex gap-2 items-center flex-col justify-center w-full sm:flex-row",children:(0,a.jsxs)("button",{onClick:()=>{if(0===e.length){alert("Veuillez s\xe9lectionner des fichiers CSV avant de lancer le processus.");return}r(e)},className:"rounded-full border border-solid border-transparent transition-colors flex items-center justify-center bg-foreground text-background gap-2 hover:bg-[#383838] dark:hover:bg-[#ccc] text-sm sm:text-base h-10 sm:h-12 px-4 sm:px-5",children:[(0,a.jsx)(p.default,{className:"dark:invert",src:"/vercel.svg",alt:"Vercel logomark",width:20,height:20}),"Lancer le processus"]})})]}),(0,a.jsxs)("footer",{className:"row-start-3 flex gap-6 mt-10 flex-wrap items-center justify-center",children:[(0,a.jsxs)("a",{className:"flex items-center gap-2 hover:underline hover:underline-offset-4",href:"http://localhost:8080/login",target:"_blank",rel:"noopener noreferrer",children:[(0,a.jsx)(p.default,{"aria-hidden":!0,src:"/window.svg",alt:"Window icon",width:16,height:16}),"Acc\xe9der \xe0 l'UI Airflow"]}),(0,a.jsxs)("a",{className:"flex items-center gap-2 hover:underline hover:underline-offset-4",href:"http://localhost:9870/",target:"_blank",rel:"noopener noreferrer",children:[(0,a.jsx)(p.default,{"aria-hidden":!0,src:"/globe.svg",alt:"Globe icon",width:16,height:16}),"Acc\xe9der \xe0 l'interface HDFS"]})]})]})}}},function(e){e.O(0,[288,470,971,69,744],function(){return e(e.s=9832)}),_N_E=e.O()}]);